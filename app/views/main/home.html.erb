<% provide(:title, "Home") %>


<div class = "container" style="display:flex; flex-flow: row wrap;  justify-content: space-around;">
    <div class= "col-md-12 col-sm-12 col-xs-12 "><h1>Dashboard</h1></div>
    <div class = "col-md-5 col-sm-12 col-xs-12 animal-list" style = "border:solid; border-radius: 10px; margin: 5px">
    </div>

    <div class = "col-md-5 col-sm-12 col-xs-12 user-list"  style = "border:solid;  border-radius: 10px;  margin: 5px">
    </div>

    <div class = "col-md-5 col-sm-12 col-xs-12 alert-list"  style = "border:solid;  border-radius: 10px;  margin: 5px ">
    </div>

    <div class = "col-md-5 col-sm-12 col-xs-12 user-list" style = "border:solid;  border-radius: 10px;  margin: 5px">
    </div >
    <div style = "visibile:false; width: 45% "> </div>
</div>

<script>

if($(".animal-list").length > 0){
    widgetAnimalList();
}
if($(".user-list").length > 0){
    widgetUserList();
}
if($(".alert-list").length > 0){
    widgetAlertList();
}
function widgetAnimalList(){
    $.ajax({url: "animals/query", success: function(result){
        var str = " <h2>Animals</h2>"
        str += "<table class='table table-striped'>" 

        for (x in result){
    
                str += "<tr> \
                <td> <a href='/animals/profile?method=get&param=" + result[x].id + "' > " + result[x].name + "</a></td>\
                 <td>" + result[x].primary + "</td>\
                <td>" + result[x].secondary + "</td>\
                </tr>"
        }
        str +=  " </table>"
         $(".animal-list").each(function(){
            $(this).html( str)
         })
    }});
}
function widgetUserList(){
    $.ajax({url: "people/query", success: function(result){
        var str = " <h2>Users</h2>"
        str += "<table class='table table-striped'>" 

        for (x in result){
    
                str += "<tr> \
                <td> <a href='/people/profile?method=get&param=" + result[x].id + "' > " + result[x].name + "</a></td>\
                 <td>" + result[x].email + "</td>\
                </tr>"
        }
        str +=  " </table>"
         $(".user-list").each(function(){
            $(this).html( str)
         })
    }});
}

function widgetAlertList(){
    $.ajax({url: "/alerts/query", success: function(result){
        var str = " <h2>Alerts</h2>"
        str += "<table class='table table-striped'>" 

        for (x in result){
    
                str += "<tr> \
                <td> <a> " + result[x].title + "</a></td>\
                 <td>" + result[x].date + "</td>\
                </tr>"
        }
        str +=  " </table>"
         $(".alert-list").each(function(){
            $(this).html( str)
         })
    }});
}
</script>